<?php
/**
 * Created by PhpStorm.
 * User: Ainsoft
 * Date: 1/18/2019
 * Time: 9:33 AM
 */

Route::post('/user',function (){
   return [
       "user"=>request()->user()
   ] ;
});



Route::get('/services',"BackEnd\ServicesController@get");
Route::post('/services',"BackEnd\ServicesController@post");
Route::delete('/services',"BackEnd\ServicesController@delete");

Route::get('/solutions',"BackEnd\SolutionsController@get");
Route::post('/solutions',"BackEnd\SolutionsController@post");
Route::delete('/solutions',"BackEnd\SolutionsController@delete");

Route::get('/reviews',"BackEnd\ReviewsController@get");
Route::delete('/reviews',"BackEnd\ReviewsController@delete");

Route::get('/reasons',"BackEnd\ReasonsController@get");
Route::post('/reasons',"BackEnd\ReasonsController@post");
Route::delete('/reasons',"BackEnd\ReasonsController@delete");

Route::get('/clients',"BackEnd\ClientsController@get");
Route::post('/clients',"BackEnd\ClientsController@post");
Route::delete('/clients',"BackEnd\ClientsController@delete");

Route::get('/contacts',function (\Illuminate\Http\Request $request){
   $contacts=\App\Models\Contact::all();
   return $contacts;
});

Route::post('/status/{table}',function ($table){
    $req=request();
    $temp=null;
    switch ($table){
        case "services":
            $temp=\App\Models\Services::find($req->id);
            $temp->status=$req->status;
            break;
        case "reviews":
            $temp=\App\Models\Reviews::find($req->id);
            $temp->status=$req->status;
            break;
        case "solutions":
            $temp=\App\Models\Solutions::find($req->id);
            $temp->status=$req->status;
            break;
        case "clients":
            $temp=\App\Models\Clients::find($req->id);
            $temp->status=$req->status;
            break;
        case "contact":
            $temp=\App\Models\Contact::find($req->id);
            $temp->status=$req->status;
            break;
        default:
            return response("dont do that",500);
            break;
    }
    $temp->save();
   return $temp;
});

Route::post('/media/save',function (\Illuminate\Http\Request $request){
    $request->validate([
        "file"=>"required"
    ]);
   $filename=\Illuminate\Support\Facades\Storage::disk('icon')->put('',$request->file);
   return [
     "filename"=>$filename,
     "location"=>\Illuminate\Support\Facades\Storage::disk('icon')->url($filename)
   ];
});
